<!DOCTYPE html>

<html>
	<head>
		<title>Profile</title>

		<script 
			src="https://www.unpkg.com/@propelauth/javascript@2.0.11/dist/javascript.min.js" 
			integrity="sha384-FENNH2f7QuQvkZJBL7jebLr0OtYKgTA2iq+C5g3VXXX7SBwWmeMMoc+pBBtcn76G" 
			crossorigin="anonymous"></script>
	
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		<script src="/static/js/authuser.js"></script>
		<script src="/static/js/api.js"></script>
		<script src="/static/js/elemutils.js"></script>
		<script src="/static/js/navbar.js" defer></script>
		<script src="/static/js/actiontabs.js" defer></script>
		
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<link rel="stylesheet" href="/static/css/theme.css"/>
	</head>

	<body>
		<div id="wrapper">
			<script>
				execWithUserData(async (userData, authInfo) => { // main function for page
					const wrapper = document.getElementById("wrapper");

					const userName = textElement("h2", `aka @${userData.username}`);
					const userEmail = textElement("h2", `Linked to ${authInfo.user.email}`);

					const stats = document.createElement("div");

					if (userData.journeys.length == 1) {
						stats.append(
							textElement("h3", "1 Journey")
						);
					}
					else {
						stats.append(
							textElement("h3", `${userData.journeys.length} Journeys`)
						);
					}

					wrapper.prepend(
						textElement("h1", `Hello, ${authInfo.user.firstName}!`),
						userName,
						userEmail,
						stats
					);
				})
			</script>

			<button class="btn blue-btn" onclick="authClient.logout().then(() => location.href = '/'); return false">Log Out</button>
		</div>
	</body>
</html>